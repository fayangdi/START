<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base target="_blank">
    <title>Start</title>
    <link rel="icon" href="file:///C:/Program Files (x86)/Microsoft/Edge/Application/start_icon.png" type="image/x-icon">
    <style>
        :root { --bg-color: #f5f5f5; --text-color: #333; --card-bg: #ffffff; --border-color: #ddd; --primary-color: #4dabf7; --hover-color: #339af0; --header-bg: #ffffff; --shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .dark-mode { --bg-color: #1a1a1a; --text-color: #e0e0e0; --card-bg: #2d2d2d; --border-color: #444; --primary-color: #5c9edc; --hover-color: #4a8bc2; --header-bg: #2d2d2d; --shadow: 0 2px 10px rgba(0, 0, 0, 0.3); }
        * { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; box-sizing: border-box; }
        body { margin: 0; font-family: "æ¥·ä½“", sans-serif; background-color: var(--bg-color); color: var(--text-color); min-height: 100vh; display: flex; flex-direction: column; }
        .header { background-color: var(--header-bg); padding: 20px 0; box-shadow: var(--shadow); position: relative; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .main-content { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px 20px; }
        .welcome-section { text-align: center; margin-bottom: 40px; }
        .search-section { width: 100%; max-width: 800px; margin-bottom: 40px; }
        .links-section { width: 100%; max-width: 1000px; text-align: center; }
        h1 { margin: 0 0 20px 0; font-size: 2.5rem; color: var(--text-color); }
        .search-form { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
        input[type="text"] { width: 100%; max-width: 600px; height: 50px; font-size: 20px; padding: 15px; border: 1px solid var(--border-color); border-radius: 5px; background-color: var(--card-bg); color: var(--text-color); }
        input[type="submit"] { height: 50px; padding: 15px 30px; font-size: 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer; line-height: 1; }
        input[type="submit"]:hover { background-color: var(--hover-color); }
        .note { color: #ff6b6b; font-size: 18px; text-align: center; }
        a { text-decoration: none; color: var(--primary-color); margin: 10px; font-size: 18px; transition: color 0.3s ease; display: inline-block; }
        a:hover { color: var(--hover-color); }
        #settings-btn { position: fixed; top: 20px; right: 20px; background: rgba(0, 0, 0, 0.1); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; transition: all 0.3s ease; z-index: 1000; display: flex; align-items: center; justify-content: center; }
        #settings-btn:hover { background: rgba(0, 0, 0, 0.2); transform: rotate(90deg); }
        #theme-toggle { position: fixed; top: 20px; right: 70px; background: rgba(0, 0, 0, 0.1); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer; transition: all 0.3s ease; z-index: 1000; display: flex; align-items: center; justify-content: center; }
        #theme-toggle:hover { background: rgba(0, 0, 0, 0.2); }
        #settings-panel { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 999; }
        .settings-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card-bg); padding: 20px; border-radius: 10px; width: 80%; max-width: 800px; max-height: 80%; overflow-y: auto; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); color: var(--text-color); }
        .settings-tabs { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 20px; }
        .tab-btn { padding: 10px 20px; background: none; border: none; cursor: pointer; font-size: 16px; border-bottom: 2px solid transparent; color: var(--text-color); }
        .tab-btn.active { border-bottom: 2px solid var(--primary-color); color: var(--primary-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .link-group { margin-bottom: 20px; border: 1px solid var(--border-color); padding: 15px; border-radius: 5px; background-color: var(--card-bg); }
        .link-group-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .link-group-title { font-weight: bold; font-size: 18px; color: var(--text-color); }
        .link-item { display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 1px solid var(--border-color); color: var(--text-color); }
        .link-item:last-child { border-bottom: none; }
        .btn { padding: 5px 10px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 3px; cursor: pointer; margin-left: 5px; color: #333; }
        .btn-danger { background: #ff6b6b; color: white; border-color: #ff5252; }
        .btn-primary { background: var(--primary-color); color: white; border-color: var(--hover-color); }
        .btn-success { background: #51cf66; color: white; border-color: #40c057; }
        .btn-warning { background: #ffa94d; color: white; border-color: #ff922b; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: var(--text-color); }
        .form-control { width: 600px; max-width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 16px; box-sizing: border-box; background-color: var(--card-bg); color: var(--text-color); }
        select.form-control { height: 50px; font-size: 18px; padding: 0 15px; }
        .search-engine-option { display: flex; align-items: center; margin-bottom: 10px; }
        .search-engine-option input { margin-right: 10px; }
        .link-group-display { margin-bottom: 20px; text-align: center; }
        .link-group-display h4 { margin-bottom: 10px; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 5px; }
        .group-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid var(--border-color); color: var(--text-color); }
        .group-item:last-child { border-bottom: none; }
        .group-actions { display: flex; }
        .group-link-count { color: #666; font-size: 14px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1001; }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card-bg); padding: 20px; border-radius: 10px; width: 400px; max-width: 90%; color: var(--text-color); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        .modal-title { font-size: 18px; font-weight: bold; color: var(--text-color); }
        .close-btn { background: none; border: none; font-size: 20px; cursor: pointer; color: var(--text-color); }
        .modal-footer { text-align: right; margin-top: 20px; }
        .tab-content .form-group { display: flex; flex-direction: column; align-items: center; }
        .tab-content .form-group label { align-self: flex-start; margin-left: calc((100% - 600px) / 2); max-width: 600px; width: 100%; }
        .theme-option { display: flex; align-items: center; margin-bottom: 15px; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background-color: var(--card-bg); }
        .theme-option input { margin-right: 10px; }
        .theme-preview { width: 40px; height: 40px; border-radius: 5px; margin-right: 15px; border: 1px solid var(--border-color); }
        .light-preview { background: linear-gradient(135deg, #f5f5f5 50%, #ffffff 50%); }
        .dark-preview { background: linear-gradient(135deg, #1a1a1a 50%, #2d2d2d 50%); }
        .link-move-group { display: flex; align-items: center; margin-left: 10px; }
        .link-move-group select { margin-right: 5px; padding: 3px; border: 1px solid var(--border-color); border-radius: 3px; background-color: var(--card-bg); color: var(--text-color); }
        .link-order-controls { display: flex; align-items: center; margin-left: 10px; }
        .link-order-controls button { margin: 0 2px; padding: 3px 6px; }
        .data-management-buttons { display: flex; gap: 10px; margin-top: 20px; }
        .link-edit-form { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; padding: 10px; border: 1px solid var(--border-color); border-radius: 5px; background-color: var(--card-bg); }
        .link-edit-row { display: flex; gap: 10px; align-items: center; }
        .link-edit-input { flex: 1; padding: 5px; border: 1px solid var(--border-color); border-radius: 3px; background-color: var(--card-bg); color: var(--text-color); }
        .import-option { display: flex; align-items: center; margin-bottom: 10px; }
        .import-option input { margin-right: 10px; }
        .file-input-container { display: flex; flex-direction: column; align-items: center; margin: 15px 0; }
        .file-input-label { display: inline-block; padding: 10px 20px; background-color: var(--primary-color); color: white; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; text-align: center; margin-bottom: 10px; }
        .file-input-label:hover { background-color: var(--hover-color); }
        .file-input { display: none; }
        .file-name { margin-top: 5px; font-size: 14px; color: var(--text-color); }
        .data-management-section { margin-bottom: 25px; padding: 15px; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--card-bg); }
        .data-management-section h4 { margin-top: 0; margin-bottom: 15px; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 8px; }
        .data-management-section p { margin-bottom: 15px; line-height: 1.5; }
        .import-options { margin: 15px 0; padding: 12px; background-color: rgba(0, 0, 0, 0.03); border-radius: 6px; border-left: 4px solid var(--primary-color); }
        .import-option { display: flex; align-items: flex-start; margin-bottom: 10px; padding: 8px; border-radius: 4px; transition: background-color 0.2s ease; }
        .import-option:hover { background-color: rgba(0, 0, 0, 0.05); }
        .import-option input { margin-right: 10px; margin-top: 2px; }
        .import-option label { flex: 1; line-height: 1.4; }
        .file-input-container { display: flex; flex-direction: column; align-items: center; margin: 20px 0; padding: 20px; border: 2px dashed var(--border-color); border-radius: 8px; background-color: rgba(0, 0, 0, 0.02); transition: border-color 0.3s ease; }
        .file-input-container:hover { border-color: var(--primary-color); }
        .file-input-label { display: inline-block; padding: 12px 24px; background-color: var(--primary-color); color: white; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease; text-align: center; margin-bottom: 10px; font-weight: 500; }
        .file-input-label:hover { background-color: var(--hover-color); }
        .file-input { display: none; }
        .file-name { margin-top: 8px; font-size: 14px; color: var(--text-color); text-align: center; }
        .import-button-container { text-align: center; margin-top: 15px; }
        .danger-zone { margin-top: 30px; padding: 15px; border: 1px solid #ff6b6b; border-radius: 8px; background-color: rgba(255, 107, 107, 0.05); }
        .danger-zone h4 { color: #ff6b6b; border-bottom: 1px solid rgba(255, 107, 107, 0.3); }
        
        /* æ–°å¢ï¼šè·³è½¬é¡µé¢æ ·å¼ */
        #redirect-page { display: none; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; text-align: center; padding: 20px; }
        .redirect-content { max-width: 800px; width: 100%; padding: 40px; background-color: var(--card-bg); border-radius: 10px; box-shadow: var(--shadow); }
        .redirect-content h2 { margin-bottom: 20px; color: var(--text-color); }
        .redirect-url { display: inline-block; padding: 15px; background-color: rgba(77, 171, 247, 0.1); border-radius: 5px; margin: 20px 0; font-size: 18px; word-break: break-all; color: var(--primary-color); }
        .countdown { font-size: 24px; margin: 20px 0; color: #ff6b6b; }
        .redirect-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 30px; }
        .redirect-btn { padding: 12px 30px; font-size: 18px; border-radius: 5px; cursor: pointer; border: none; transition: all 0.3s ease; }
        .go-btn { background-color: var(--primary-color); color: white; }
        .go-btn:hover { background-color: var(--hover-color); }
        .back-btn { background-color: #f0f0f0; color: #333; }
        .back-btn:hover { background-color: #e0e0e0; }
        
        @media (max-width: 700px) { 
            .tab-content .form-group label { margin-left: 0; }
            .form-control { width: 100%; }
            .search-form { flex-direction: column; align-items: center; }
            input[type="submit"] { width: 100%; max-width: 600px; }
            h1 { font-size: 2rem; }
            .link-move-group, .link-order-controls { flex-direction: column; align-items: flex-start; margin-top: 5px; }
            .link-move-group select, .link-order-controls button { margin-bottom: 5px; width: 100%; }
            .link-edit-row { flex-direction: column; align-items: stretch; }
            .redirect-content { padding: 20px; }
            .redirect-buttons { flex-direction: column; }
            .redirect-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- è·³è½¬é¡µé¢ï¼ˆé»˜è®¤éšè—ï¼‰ -->
    <div id="redirect-page">
        <div class="redirect-content">
            <h2>å³å°†è®¿é—®å¤–éƒ¨ç½‘ç«™</h2>
            <p>æ‚¨å³å°†è®¿é—®ä»¥ä¸‹ç½‘ç«™ï¼š</p>
            <div class="redirect-url" id="redirect-url-display">https://example.com</div>
            <p>è¯·æ³¨æ„ï¼šå¤–éƒ¨ç½‘ç«™çš„å†…å®¹ä¸å—æˆ‘ä»¬æ§åˆ¶ï¼Œè¯·è°¨æ…è®¿é—®ã€‚</p>
            <div class="countdown" id="countdown">3ç§’åè‡ªåŠ¨è·³è½¬</div>
            <div class="redirect-buttons">
                <button class="redirect-btn go-btn" id="go-btn">ç»§ç»­è®¿é—®</button>
                <button class="redirect-btn back-btn" id="back-btn">è¿”å›é¦–é¡µ</button>
            </div>
        </div>
    </div>
    
    <!-- åŸé¦–é¡µå†…å®¹ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰ -->
    <div id="home-page">
        <div class="header">
            <div class="container">
                <button id="theme-toggle">ğŸŒ™</button>
                <button id="settings-btn">âš™ï¸</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="welcome-section">
                <h1>æ¬¢è¿ï¼</h1>
            </div>
            
            <div class="search-section">
                <form id="search-form" class="search-form">
                    <input type="text" id="search" name="q" placeholder="è¾“å…¥æœç´¢å†…å®¹æˆ–ç½‘å€" autocomplete="off">
                    <input type="submit" value="æœç´¢">
                </form>
                <p class="note">æ³¨ï¼šè¾“å…¥ç½‘å€å¯ç›´æ¥è®¿é—®ï¼Œè¾“å…¥æœç´¢å†…å®¹å°†ä½¿ç”¨æœç´¢å¼•æ“</p>
            </div>
            
            <div class="links-section">
                <div id="quick-links">
                    <!-- å¿«é€Ÿé“¾æ¥å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- è®¾ç½®é¢æ¿ -->
        <div id="settings-panel">
            <div class="settings-content">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="links">å¿«é€Ÿé“¾æ¥</button>
                    <button class="tab-btn" data-tab="groups">åˆ†ç»„ç®¡ç†</button>
                    <button class="tab-btn" data-tab="search">æœç´¢å¼•æ“</button>
                    <button class="tab-btn" data-tab="theme">ä¸»é¢˜è®¾ç½®</button>
                    <button class="tab-btn" data-tab="data">æ•°æ®ç®¡ç†</button>
                </div>
                
                <!-- å¿«é€Ÿé“¾æ¥ç®¡ç† -->
                <div id="links-tab" class="tab-content active">
                    <h3>ç®¡ç†å¿«é€Ÿé“¾æ¥</h3>
                    
                    <div class="form-group">
                        <label for="new-link-name">é“¾æ¥åç§°</label>
                        <input type="text" id="new-link-name" class="form-control" placeholder="ç¤ºä¾‹">
                    </div>
                    
                    <div class="form-group">
                        <label for="new-link-url">é“¾æ¥åœ°å€</label>
                        <input type="text" id="new-link-url" class="form-control" placeholder="https://example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="new-link-group">é“¾æ¥åˆ†ç»„</label>
                        <select id="new-link-group" class="form-control">
                            <option value="é»˜è®¤åˆ†ç»„">é»˜è®¤åˆ†ç»„</option>
                            <!-- ç°æœ‰åˆ†ç»„å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                        </select>
                    </div>
                    
                    <button id="add-link-btn" class="btn btn-primary">æ·»åŠ é“¾æ¥</button>
                    
                    <div id="link-groups">
                        <!-- é“¾æ¥åˆ†ç»„å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- åˆ†ç»„ç®¡ç† -->
                <div id="groups-tab" class="tab-content">
                    <h3>ç®¡ç†åˆ†ç»„</h3>
                    
                    <div class="form-group">
                        <label for="new-group-name">æ–°åˆ†ç»„åç§°</label>
                        <input type="text" id="new-group-name" class="form-control" placeholder="ç¤ºä¾‹åˆ†ç»„">
                    </div>
                    
                    <button id="add-group-btn" class="btn btn-primary">æ·»åŠ åˆ†ç»„</button>
                    
                    <div id="groups-list" style="margin-top: 20px;">
                        <!-- åˆ†ç»„åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- æœç´¢å¼•æ“è®¾ç½® -->
                <div id="search-tab" class="tab-content">
                    <h3>é€‰æ‹©æœç´¢å¼•æ“</h3>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="bing" name="search-engine" value="bing" checked>
                        <label for="bing">å¿…åº” (Bing)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="baidu" name="search-engine" value="baidu">
                        <label for="baidu">ç™¾åº¦ (Baidu)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="google" name="search-engine" value="google">
                        <label for="google">è°·æ­Œ (Google)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="sogou" name="search-engine" value="sogou">
                        <label for="sogou">æœç‹— (Sogou)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="360" name="search-engine" value="360">
                        <label for="360">360æœç´¢ (360)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="yahoo" name="search-engine" value="yahoo">
                        <label for="yahoo">é›…è™ (Yahoo)</label>
                    </div>
                    
                    <div class="search-engine-option">
                        <input type="radio" id="duckduckgo" name="search-engine" value="duckduckgo">
                        <label for="duckduckgo">DuckDuckGo</label>
                    </div>
                    
                    <button id="save-search-engine" class="btn btn-primary">ä¿å­˜è®¾ç½®</button>
                </div>
                
                <!-- ä¸»é¢˜è®¾ç½® -->
                <div id="theme-tab" class="tab-content">
                    <h3>é€‰æ‹©ä¸»é¢˜</h3>
                    
                    <div class="theme-option">
                        <input type="radio" id="light-theme" name="theme" value="light" checked>
                        <div class="theme-preview light-preview"></div>
                        <label for="light-theme">æµ…è‰²æ¨¡å¼</label>
                    </div>
                    
                    <div class="theme-option">
                        <input type="radio" id="dark-theme" name="theme" value="dark">
                        <div class="theme-preview dark-preview"></div>
                        <label for="dark-theme">æ·±è‰²æ¨¡å¼</label>
                    </div>
                    
                    <button id="save-theme" class="btn btn-primary">ä¿å­˜ä¸»é¢˜</button>
                </div>
                
                <!-- æ•°æ®ç®¡ç† -->
                <div id="data-tab" class="tab-content">
                    <h3>æ•°æ®ç®¡ç†</h3>
                    
                    <div class="data-management-section">
                        <h4>å¯¼å‡ºæ•°æ®</h4>
                        <p>å°†æ‚¨çš„æ‰€æœ‰è®¾ç½®å’Œé“¾æ¥å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼Œç”¨äºå¤‡ä»½æˆ–è¿ç§»åˆ°å…¶ä»–è®¾å¤‡ã€‚</p>
                        <div style="text-align: center;">
                            <button id="export-data-btn" class="btn btn-primary">å¯¼å‡ºæ•°æ®</button>
                        </div>
                    </div>
                    
                    <div class="data-management-section">
                        <h4>å¯¼å…¥æ•°æ®</h4>
                        <p>ä»JSONæ–‡ä»¶å¯¼å…¥è®¾ç½®å’Œé“¾æ¥ã€‚æ‚¨å¯ä»¥é€‰æ‹©å¯¼å…¥æ–¹å¼ï¼š</p>
                        
                        <div class="import-options">
                            <div class="import-option">
                                <input type="radio" id="import-overwrite" name="import-mode" value="overwrite" checked>
                                <label for="import-overwrite">
                                    <strong>è¦†ç›–æ¨¡å¼</strong><br>
                                    <small>æ›¿æ¢æ‰€æœ‰ç°æœ‰æ•°æ®ï¼Œå®Œå…¨ä½¿ç”¨å¯¼å…¥æ–‡ä»¶çš„å†…å®¹</small>
                                </label>
                            </div>
                            
                            <div class="import-option">
                                <input type="radio" id="import-merge" name="import-mode" value="merge">
                                <label for="import-merge">
                                    <strong>åˆå¹¶æ¨¡å¼</strong><br>
                                    <small>ä¿ç•™ç°æœ‰æ•°æ®ï¼Œåªæ·»åŠ å¯¼å…¥æ–‡ä»¶ä¸­çš„æ–°æ•°æ®</small>
                                </label>
                            </div>
                        </div>
                        
                        <div class="file-input-container">
                            <label for="import-data-file" class="file-input-label">é€‰æ‹©JSONæ–‡ä»¶</label>
                            <input type="file" id="import-data-file" accept=".json" class="file-input">
                            <div id="file-name" class="file-name">æœªé€‰æ‹©æ–‡ä»¶</div>
                        </div>
                        
                        <div class="import-button-container">
                            <button id="import-data-btn" class="btn btn-primary">å¯¼å…¥æ•°æ®</button>
                        </div>
                    </div>
                    
                    <div class="data-management-section danger-zone">
                        <h4>é‡ç½®æ•°æ®</h4>
                        <p>æ¸…é™¤æ‰€æœ‰è®¾ç½®å’Œé“¾æ¥ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p>
                        <div style="text-align: center;">
                            <button id="reset-data-btn" class="btn btn-danger">é‡ç½®æ•°æ®</button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <button id="close-settings" class="btn">å…³é—­</button>
                </div>
            </div>
        </div>
        
        <!-- ç¼–è¾‘åˆ†ç»„æ¨¡æ€æ¡† -->
        <div id="edit-group-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">ç¼–è¾‘åˆ†ç»„</div>
                    <button class="close-btn" id="close-edit-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="edit-group-name">åˆ†ç»„åç§°</label>
                        <input type="text" id="edit-group-name" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="save-group-btn" class="btn btn-primary">ä¿å­˜</button>
                    <button id="cancel-edit-btn" class="btn">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é…ç½®æ•°æ®æ¨¡å‹
        let config = {
            quickLinks: [],
            groups: ['é»˜è®¤åˆ†ç»„'],
            searchEngine: 'bing',
            theme: 'light'
        };
        
        // å½“å‰ç¼–è¾‘çš„åˆ†ç»„ID
        let currentEditGroupId = null;
        
        // å½“å‰ç¼–è¾‘çš„é“¾æ¥ID
        let currentEditLinkId = null;
        
        // è·³è½¬ç›¸å…³å˜é‡
        let redirectUrl = '';
        let countdownTimer = null;
        let countdownSeconds = 3;
        
        // æœç´¢å¼•æ“é…ç½®
        const searchEngines = {
            bing: { name: 'å¿…åº”', url: 'https://www.bing.com/search', param: 'q' },
            baidu: { name: 'ç™¾åº¦', url: 'https://www.baidu.com/s', param: 'wd' },
            google: { name: 'è°·æ­Œ', url: 'https://www.google.com/search', param: 'q' },
            sogou: { name: 'æœç‹—', url: 'https://www.sogou.com/web', param: 'query' },
            360: { name: '360æœç´¢', url: 'https://www.so.com/s', param: 'q' },
            yahoo: { name: 'é›…è™', url: 'https://search.yahoo.com/search', param: 'p' },
            duckduckgo: { name: 'DuckDuckGo', url: 'https://duckduckgo.com/', param: 'q' }
        };
        
        // DOMå…ƒç´ 
        const settingsBtn = document.getElementById('settings-btn');
        const themeToggle = document.getElementById('theme-toggle');
        const settingsPanel = document.getElementById('settings-panel');
        const closeSettingsBtn = document.getElementById('close-settings');
        const tabBtns = document.querySelectorAll('.tab-btn');
        const quickLinksContainer = document.getElementById('quick-links');
        const linkGroupsContainer = document.getElementById('link-groups');
        const addLinkBtn = document.getElementById('add-link-btn');
        const saveSearchEngineBtn = document.getElementById('save-search-engine');
        const saveThemeBtn = document.getElementById('save-theme');
        const searchForm = document.getElementById('search-form');
        const linkGroupSelect = document.getElementById('new-link-group');
        const addGroupBtn = document.getElementById('add-group-btn');
        const newGroupNameInput = document.getElementById('new-group-name');
        const groupsListContainer = document.getElementById('groups-list');
        const editGroupModal = document.getElementById('edit-group-modal');
        const closeEditModalBtn = document.getElementById('close-edit-modal');
        const cancelEditBtn = document.getElementById('cancel-edit-btn');
        const saveGroupBtn = document.getElementById('save-group-btn');
        const editGroupNameInput = document.getElementById('edit-group-name');
        const exportDataBtn = document.getElementById('export-data-btn');
        const importDataBtn = document.getElementById('import-data-btn');
        const importDataFile = document.getElementById('import-data-file');
        const resetDataBtn = document.getElementById('reset-data-btn');
        const fileNameDisplay = document.getElementById('file-name');
        const homePage = document.getElementById('home-page');
        const redirectPage = document.getElementById('redirect-page');
        const redirectUrlDisplay = document.getElementById('redirect-url-display');
        const countdownDisplay = document.getElementById('countdown');
        const goBtn = document.getElementById('go-btn');
        const backBtn = document.getElementById('back-btn');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
            renderQuickLinks();
            renderLinkGroups();
            updateGroupSelect();
            renderGroupsList();
            setupEventListeners();
            applyTheme();
        });
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            settingsBtn.addEventListener('click', function() {
                settingsPanel.style.display = 'block';
            });
            
            // ä¸»é¢˜åˆ‡æ¢æŒ‰é’®
            themeToggle.addEventListener('click', function() {
                toggleTheme();
            });
            
            // å…³é—­è®¾ç½®é¢æ¿
            closeSettingsBtn.addEventListener('click', function() {
                settingsPanel.style.display = 'none';
            });
            
            // ç‚¹å‡»è®¾ç½®é¢æ¿å¤–éƒ¨åŒºåŸŸå…³é—­é¢æ¿
            settingsPanel.addEventListener('click', function(event) {
                if (event.target === settingsPanel) {
                    settingsPanel.style.display = 'none';
                }
            });
            
            // é€‰é¡¹å¡åˆ‡æ¢
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                    tabBtns.forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // æ·»åŠ æ´»åŠ¨çŠ¶æ€åˆ°å½“å‰é€‰é¡¹å¡
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab') + '-tab';
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // æœç´¢è¡¨å•æäº¤äº‹ä»¶
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const searchInput = document.getElementById('search');
                const query = searchInput.value.trim();
                
                if (!query) return;
                
                // åˆ¤æ–­æ˜¯å¦ä¸ºç½‘å€
                if (isURL(query)) {
                    // æ˜¾ç¤ºè·³è½¬é¡µé¢
                    showRedirectPage(query);
                } else {
                    // æ­£å¸¸æœç´¢
                    performSearch(query);
                }
            });
            
            // æ·»åŠ é“¾æ¥æŒ‰é’®
            addLinkBtn.addEventListener('click', function() {
                const name = document.getElementById('new-link-name').value.trim();
                let url = document.getElementById('new-link-url').value.trim();
                const group = linkGroupSelect.value || 'é»˜è®¤åˆ†ç»„';
                
                // è‡ªåŠ¨çº é”™ç½‘å€
                url = autoCorrectUrl(url);
                
                if (name && url) {
                    // æ·»åŠ é“¾æ¥åˆ°é…ç½®
                    config.quickLinks.push({
                        id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                        name: name,
                        url: url,
                        group: group,
                        order: config.quickLinks.filter(link => link.group === group).length // è®¾ç½®åˆå§‹é¡ºåº
                    });
                    
                    // ä¿å­˜é…ç½®
                    saveConfig();
                    
                    // é‡æ–°æ¸²æŸ“é“¾æ¥
                    renderQuickLinks();
                    renderLinkGroups();
                    updateGroupSelect();
                    renderGroupsList();
                    
                    // æ¸…ç©ºè¾“å…¥æ¡†
                    document.getElementById('new-link-name').value = '';
                    document.getElementById('new-link-url').value = '';
                } else {
                    alert('è¯·å¡«å†™é“¾æ¥åç§°å’Œåœ°å€ï¼');
                }
            });
            
            // ä¿å­˜æœç´¢å¼•æ“è®¾ç½®
            saveSearchEngineBtn.addEventListener('click', function() {
                const selectedEngine = document.querySelector('input[name="search-engine"]:checked').value;
                config.searchEngine = selectedEngine;
                saveConfig();
                updateSearchForm();
                alert('æœç´¢å¼•æ“è®¾ç½®å·²ä¿å­˜ï¼');
            });
            
            // ä¿å­˜ä¸»é¢˜è®¾ç½®
            saveThemeBtn.addEventListener('click', function() {
                const selectedTheme = document.querySelector('input[name="theme"]:checked').value;
                config.theme = selectedTheme;
                saveConfig();
                applyTheme();
                alert('ä¸»é¢˜è®¾ç½®å·²ä¿å­˜ï¼');
            });
            
            // æ·»åŠ åˆ†ç»„æŒ‰é’®
            addGroupBtn.addEventListener('click', function() {
                const groupName = newGroupNameInput.value.trim();
                if (groupName) {
                    if (config.groups.includes(groupName)) {
                        alert('åˆ†ç»„åç§°å·²å­˜åœ¨ï¼');
                        return;
                    }
                    
                    config.groups.push(groupName);
                    saveConfig();
                    updateGroupSelect();
                    renderGroupsList();
                    newGroupNameInput.value = '';
                } else {
                    alert('è¯·è¾“å…¥åˆ†ç»„åç§°ï¼');
                }
            });
            
            // å…³é—­ç¼–è¾‘åˆ†ç»„æ¨¡æ€æ¡†
            closeEditModalBtn.addEventListener('click', function() {
                editGroupModal.style.display = 'none';
            });
            
            cancelEditBtn.addEventListener('click', function() {
                editGroupModal.style.display = 'none';
            });
            
            // ä¿å­˜åˆ†ç»„ç¼–è¾‘
            saveGroupBtn.addEventListener('click', function() {
                const newName = editGroupNameInput.value.trim();
                if (newName && currentEditGroupId !== null) {
                    const oldName = config.groups[currentEditGroupId];
                    
                    // æ›´æ–°åˆ†ç»„åç§°
                    config.groups[currentEditGroupId] = newName;
                    
                    // æ›´æ–°æ‰€æœ‰ä½¿ç”¨è¯¥åˆ†ç»„çš„é“¾æ¥
                    config.quickLinks.forEach(link => {
                        if (link.group === oldName) {
                            link.group = newName;
                        }
                    });
                    
                    saveConfig();
                    updateGroupSelect();
                    renderLinkGroups();
                    renderQuickLinks();
                    renderGroupsList();
                    
                    editGroupModal.style.display = 'none';
                }
            });
            
            // å¯¼å‡ºæ•°æ®
            exportDataBtn.addEventListener('click', function() {
                exportData();
            });
            
            // æ–‡ä»¶é€‰æ‹©æ˜¾ç¤º
            importDataFile.addEventListener('change', function() {
                if (this.files.length > 0) {
                    fileNameDisplay.textContent = this.files[0].name;
                } else {
                    fileNameDisplay.textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
                }
            });
            
            // å¯¼å…¥æ•°æ®
            importDataBtn.addEventListener('click', function() {
                if (importDataFile.files.length === 0) {
                    alert('è¯·é€‰æ‹©è¦å¯¼å…¥çš„æ–‡ä»¶ï¼');
                    return;
                }
                
                const importMode = document.querySelector('input[name="import-mode"]:checked').value;
                const file = importDataFile.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const importedConfig = JSON.parse(e.target.result);
                        
                        // éªŒè¯å¯¼å…¥çš„æ•°æ®ç»“æ„
                        if (!importedConfig.quickLinks || !importedConfig.groups || !importedConfig.searchEngine || !importedConfig.theme) {
                            alert('æ— æ•ˆçš„æ•°æ®æ–‡ä»¶ï¼');
                            return;
                        }
                        
                        let message = '';
                        if (importMode === 'overwrite') {
                            message = 'è¦†ç›–æ¨¡å¼å°†æ›¿æ¢æ‰€æœ‰ç°æœ‰è®¾ç½®å’Œé“¾æ¥ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ';
                        } else {
                            message = 'åˆå¹¶æ¨¡å¼å°†ä¿ç•™ç°æœ‰æ•°æ®ï¼Œåªæ·»åŠ æ–°æ•°æ®ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ';
                        }
                        
                        if (confirm(message)) {
                            if (importMode === 'overwrite') {
                                // è¦†ç›–æ¨¡å¼ï¼šå®Œå…¨æ›¿æ¢ç°æœ‰é…ç½®
                                config = importedConfig;
                            } else {
                                // åˆå¹¶æ¨¡å¼ï¼šä¿ç•™ç°æœ‰æ•°æ®ï¼Œåªæ·»åŠ æ–°æ•°æ®
                                
                                // åˆå¹¶åˆ†ç»„
                                importedConfig.groups.forEach(group => {
                                    if (!config.groups.includes(group)) {
                                        config.groups.push(group);
                                    }
                                });
                                
                                // åˆå¹¶é“¾æ¥
                                importedConfig.quickLinks.forEach(importedLink => {
                                    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒåç§°å’ŒURLçš„é“¾æ¥
                                    const existingLink = config.quickLinks.find(link => 
                                        link.name === importedLink.name && link.url === importedLink.url
                                    );
                                    
                                    if (!existingLink) {
                                        // å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°é“¾æ¥
                                        config.quickLinks.push({
                                            ...importedLink,
                                            id: Date.now() + Math.random(), // ç”Ÿæˆæ–°IDé¿å…å†²çª
                                            order: config.quickLinks.filter(link => link.group === importedLink.group).length
                                        });
                                    }
                                });
                                
                                // æ›´æ–°æœç´¢å¼•æ“å’Œä¸»é¢˜è®¾ç½®ï¼ˆä½¿ç”¨å¯¼å…¥çš„è®¾ç½®ï¼‰
                                config.searchEngine = importedConfig.searchEngine;
                                config.theme = importedConfig.theme;
                            }
                            
                            saveConfig();
                            loadConfig();
                            renderQuickLinks();
                            renderLinkGroups();
                            updateGroupSelect();
                            renderGroupsList();
                            applyTheme();
                            alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
                            
                            // é‡ç½®æ–‡ä»¶é€‰æ‹©
                            importDataFile.value = '';
                            fileNameDisplay.textContent = 'æœªé€‰æ‹©æ–‡ä»¶';
                        }
                    } catch (error) {
                        alert('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);
                    }
                };
                
                reader.readAsText(file);
            });
            
            // é‡ç½®æ•°æ®
            resetDataBtn.addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰è®¾ç½®å’Œé“¾æ¥ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚')) {
                    localStorage.removeItem('browserHomeConfig');
                    location.reload();
                }
            });
            
            // è·³è½¬é¡µé¢æŒ‰é’®äº‹ä»¶
            goBtn.addEventListener('click', function() {
                redirectToUrl();
            });
            
            backBtn.addEventListener('click', function() {
                cancelRedirect();
            });
        }
        
        // æ›¿æ¢ä¸­æ–‡æ ‡ç‚¹ç¬¦å·ä¸ºè‹±æ–‡æ ‡ç‚¹ç¬¦å·
        function fixChinesePunctuation(str) {
            if (!str) return str;
            
            // ä¸­æ–‡å†’å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡å†’å·
            str = str.replace(/ï¼š/g, ':');
            
            // ä¸­æ–‡æ–œæ ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡æ–œæ 
            str = str.replace(/ï¼/g, '/');
            
            // ä¸­æ–‡å¥å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡å¥å·ï¼ˆç”¨äºå¯èƒ½çš„æƒ…å†µï¼‰
            str = str.replace(/ã€‚/g, '.');
            
            // ä¸­æ–‡é€—å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡é€—å·
            str = str.replace(/ï¼Œ/g, ',');
            
            // ä¸­æ–‡é—®å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡é—®å·
            str = str.replace(/ï¼Ÿ/g, '?');
            
            // ä¸­æ–‡æ„Ÿå¹å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡æ„Ÿå¹å·
            str = str.replace(/ï¼/g, '!');
            
            // ä¸­æ–‡æ‹¬å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡æ‹¬å·
            str = str.replace(/ï¼ˆ/g, '(');
            str = str.replace(/ï¼‰/g, ')');
            
            // ä¸­æ–‡æ–¹æ‹¬å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡æ–¹æ‹¬å·
            str = str.replace(/ï¼»/g, '[');
            str = str.replace(/ï¼½/g, ']');
            
            // ä¸­æ–‡å¤§æ‹¬å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡å¤§æ‹¬å·
            str = str.replace(/ï½›/g, '{');
            str = str.replace(/ï½/g, '}');
            
            // ä¸­æ–‡å°–æ‹¬å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡å°–æ‹¬å·
            str = str.replace(/ã€ˆ/g, '<');
            str = str.replace(/ã€‰/g, '>');
            
            // ä¸­æ–‡åˆ†å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡åˆ†å·
            str = str.replace(/ï¼›/g, ';');
            
            // ä¸­æ–‡ç™¾åˆ†å·ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡ç™¾åˆ†å·
            str = str.replace(/ï¼…/g, '%');
            
            // ä¸­æ–‡ç©ºæ ¼ï¼ˆå…¨è§’ï¼‰æ›¿æ¢ä¸ºè‹±æ–‡ç©ºæ ¼
            str = str.replace(/ã€€/g, ' ');
            
            return str;
        }
        
        // åˆ¤æ–­æ˜¯å¦ä¸ºURL
        function isURL(str) {
            // å…ˆä¿®æ­£ä¸­æ–‡æ ‡ç‚¹
            str = fixChinesePunctuation(str);
            
            // ç§»é™¤å‰åç©ºæ ¼
            str = str.trim();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«ç©ºæ ¼ï¼ˆç½‘å€ä¸åº”åŒ…å«ç©ºæ ¼ï¼‰
            if (str.includes(' ')) {
                return false;
            }
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«å¸¸è§åŸŸååç¼€
            const domainPatterns = [
                /\.com(\/|$)/i,
                /\.cn(\/|$)/i,
                /\.net(\/|$)/i,
                /\.org(\/|$)/i,
                /\.edu(\/|$)/i,
                /\.gov(\/|$)/i,
                /\.top(\/|$)/i,
                /\.xyz(\/|$)/i,
                /\.site(\/|$)/i,
                /\.shop(\/|$)/i,
                /\.app(\/|$)/i,
                /\.io(\/|$)/i,
                /\.ai(\/|$)/i,
                /\.dev(\/|$)/i,
                /\.me(\/|$)/i
            ];
            
            // æ£€æŸ¥æ˜¯å¦ä»¥åè®®å¼€å¤´
            const protocolPattern = /^(https?|ftp|file):\/\//i;
            
            // æ£€æŸ¥æ˜¯å¦ä»¥wwwå¼€å¤´
            const wwwPattern = /^www\./i;
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«ç‚¹å·ä¸”ä¸ä»¥ç‚¹å·å¼€å¤´æˆ–ç»“å°¾
            if (str.includes('.') && !str.startsWith('.') && !str.endsWith('.')) {
                // å¦‚æœæœ‰åè®®æˆ–wwwå¼€å¤´ï¼Œç›´æ¥è®¤ä¸ºæ˜¯URL
                if (protocolPattern.test(str) || wwwPattern.test(str)) {
                    return true;
                }
                
                // æ£€æŸ¥æ˜¯å¦åŒ¹é…åŸŸååç¼€
                for (const pattern of domainPatterns) {
                    if (pattern.test(str)) {
                        return true;
                    }
                }
                
                // å¦‚æœåŒ…å«ç‚¹å·ä¸”çœ‹èµ·æ¥åƒæ˜¯åŸŸåæ ¼å¼ï¼ˆä¾‹å¦‚baidu.comï¼‰
                const parts = str.split('.');
                if (parts.length >= 2) {
                    const lastPart = parts[parts.length - 1].toLowerCase();
                    // æ£€æŸ¥æœ€åä¸€éƒ¨åˆ†æ˜¯å¦æ˜¯å¸¸è§çš„é¡¶çº§åŸŸåæˆ–çœ‹èµ·æ¥åƒæ˜¯åŸŸå
                    if (lastPart.length >= 2 && lastPart.length <= 6 && /^[a-z]+$/.test(lastPart)) {
                        // æ£€æŸ¥å€’æ•°ç¬¬äºŒéƒ¨åˆ†æ˜¯å¦æœ‰å†…å®¹
                        if (parts[parts.length - 2].length >= 1) {
                            return true;
                        }
                    }
                }
            }
            
            return false;
        }
        
        // æ˜¾ç¤ºè·³è½¬é¡µé¢
        function showRedirectPage(url) {
            // è‡ªåŠ¨çº æ­£ç½‘å€ï¼ˆåŒ…å«ä¸­æ–‡æ ‡ç‚¹ä¿®æ­£ï¼‰
            redirectUrl = autoCorrectUrl(url);
            
            // æ›´æ–°æ˜¾ç¤º
            redirectUrlDisplay.textContent = redirectUrl;
            countdownSeconds = 3;
            countdownDisplay.textContent = `${countdownSeconds}ç§’åè‡ªåŠ¨è·³è½¬`;
            
            // æ˜¾ç¤ºè·³è½¬é¡µé¢ï¼Œéšè—é¦–é¡µ
            homePage.style.display = 'none';
            redirectPage.style.display = 'flex';
            
            // å¼€å§‹å€’è®¡æ—¶
            startCountdown();
        }
        
        // å¼€å§‹å€’è®¡æ—¶
        function startCountdown() {
            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            if (countdownTimer) {
                clearInterval(countdownTimer);
            }
            
            // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
            countdownTimer = setInterval(function() {
                countdownSeconds--;
                countdownDisplay.textContent = `${countdownSeconds}ç§’åè‡ªåŠ¨è·³è½¬`;
                
                if (countdownSeconds <= 0) {
                    clearInterval(countdownTimer);
                    redirectToUrl();
                }
            }, 1000);
        }
        
        // è·³è½¬åˆ°ç›®æ ‡ç½‘å€
        function redirectToUrl() {
            // æ¸…é™¤è®¡æ—¶å™¨
            if (countdownTimer) {
                clearInterval(countdownTimer);
            }
            
            // åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€
            window.open(redirectUrl, '_blank');
            
            // è¿”å›é¦–é¡µ
            cancelRedirect();
        }
        
        // å–æ¶ˆè·³è½¬ï¼Œè¿”å›é¦–é¡µ
        function cancelRedirect() {
            // æ¸…é™¤è®¡æ—¶å™¨
            if (countdownTimer) {
                clearInterval(countdownTimer);
                countdownTimer = null;
            }
            
            // éšè—è·³è½¬é¡µé¢ï¼Œæ˜¾ç¤ºé¦–é¡µ
            redirectPage.style.display = 'none';
            homePage.style.display = 'block';
            
            // æ¸…ç©ºæœç´¢æ¡†
            document.getElementById('search').value = '';
        }
        
        // æ‰§è¡Œæœç´¢
        function performSearch(query) {
            const engine = searchEngines[config.searchEngine];
            const searchUrl = `${engine.url}?${engine.param}=${encodeURIComponent(query)}`;
            
            // åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€æœç´¢ç»“æœ
            window.open(searchUrl, '_blank');
            
            // æ¸…ç©ºæœç´¢æ¡†
            document.getElementById('search').value = '';
        }
        
        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const dataStr = JSON.stringify(config, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'æµè§ˆå™¨ä¸»é¡µæ•°æ®å¤‡ä»½_' + new Date().toISOString().split('T')[0] + '.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            alert('æ•°æ®å¯¼å‡ºæˆåŠŸï¼');
        }
        
        // è‡ªåŠ¨çº é”™ç½‘å€
        function autoCorrectUrl(url) {
            if (!url) return url;
            
            // é¦–å…ˆä¿®æ­£ä¸­æ–‡æ ‡ç‚¹
            url = fixChinesePunctuation(url);
            
            // ç§»é™¤å‰åç©ºæ ¼
            url = url.trim();
            
            // å¦‚æœæ²¡æœ‰åè®®ï¼Œæ·»åŠ https://
            if (!/^https?:\/\//i.test(url)) {
                // æ£€æŸ¥æ˜¯å¦æœ‰ç±»ä¼¼ "http:ï¼ï¼" æˆ– "https:ï¼ï¼" çš„æƒ…å†µ
                if (/^https?:ï¼ï¼/i.test(url)) {
                    // æ›¿æ¢ä¸­æ–‡æ–œæ ä¸ºè‹±æ–‡æ–œæ 
                    url = url.replace(/^https?:ï¼ï¼/i, function(match) {
                        return match.replace(/ï¼ï¼/g, '//');
                    });
                } else {
                    url = 'https://' + url;
                }
            }
            
            // ç¡®ä¿ç½‘å€æ ¼å¼æ­£ç¡®
            try {
                new URL(url);
            } catch (e) {
                // å¦‚æœURLæ— æ•ˆï¼Œå°è¯•æ·»åŠ www.å‰ç¼€
                if (!/^www\./i.test(url)) {
                    const correctedUrl = url.replace(/^https?:\/\//i, 'https://www.');
                    try {
                        new URL(correctedUrl);
                        url = correctedUrl;
                    } catch (e2) {
                        // å¦‚æœä»ç„¶æ— æ•ˆï¼Œä¿æŒåŸæ ·
                    }
                }
            }
            
            return url;
        }
        
        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            config.theme = config.theme === 'light' ? 'dark' : 'light';
            saveConfig();
            applyTheme();
        }
        
        // åº”ç”¨ä¸»é¢˜
        function applyTheme() {
            if (config.theme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
            } else {
                document.body.classList.remove('dark-mode');
                themeToggle.textContent = 'ğŸŒ™';
            }
            
            // æ›´æ–°ä¸»é¢˜é€‰æ‹©å™¨
            const themeRadio = document.querySelector(`input[value="${config.theme}"]`);
            if (themeRadio) {
                themeRadio.checked = true;
            }
        }
        
        // æ›´æ–°åˆ†ç»„é€‰æ‹©ä¸‹æ‹‰æ¡†
        function updateGroupSelect() {
            // æ¸…ç©ºç°æœ‰é€‰é¡¹ï¼ˆä¿ç•™é»˜è®¤åˆ†ç»„ï¼‰
            while (linkGroupSelect.options.length > 0) {
                linkGroupSelect.remove(0);
            }
            
            // æ·»åŠ æ‰€æœ‰åˆ†ç»„
            config.groups.forEach(group => {
                const option = document.createElement('option');
                option.value = group;
                option.textContent = group;
                linkGroupSelect.appendChild(option);
            });
            
            // æ›´æ–°æ‰€æœ‰ç§»åŠ¨åˆ†ç»„ä¸‹æ‹‰åˆ—è¡¨
            updateAllMoveGroupSelects();
        }
        
        // æ›´æ–°æ‰€æœ‰ç§»åŠ¨åˆ†ç»„ä¸‹æ‹‰åˆ—è¡¨
        function updateAllMoveGroupSelects() {
            document.querySelectorAll('.link-move-group select').forEach(select => {
                const currentValue = select.value;
                
                // æ¸…ç©ºç°æœ‰é€‰é¡¹
                while (select.options.length > 0) {
                    select.remove(0);
                }
                
                // æ·»åŠ æ‰€æœ‰åˆ†ç»„
                config.groups.forEach(group => {
                    const option = document.createElement('option');
                    option.value = group;
                    option.textContent = group;
                    if (group === currentValue) {
                        option.selected = true;
                    }
                    select.appendChild(option);
                });
            });
        }
        
        // æ¸²æŸ“åˆ†ç»„åˆ—è¡¨
        function renderGroupsList() {
            groupsListContainer.innerHTML = '';
            
            if (config.groups.length === 0) {
                groupsListContainer.innerHTML = '<p>æš‚æ— åˆ†ç»„</p>';
                return;
            }
            
            config.groups.forEach((group, index) => {
                // è®¡ç®—è¯¥åˆ†ç»„ä¸‹çš„é“¾æ¥æ•°é‡
                const linkCount = config.quickLinks.filter(link => link.group === group).length;
                
                const groupItem = document.createElement('div');
                groupItem.className = 'group-item';
                
                const groupInfo = document.createElement('div');
                groupInfo.innerHTML = `
                    <div style="font-weight: bold;">${group}</div>
                    <div class="group-link-count">åŒ…å« ${linkCount} ä¸ªé“¾æ¥</div>
                `;
                
                const groupActions = document.createElement('div');
                groupActions.className = 'group-actions';
                
                // ç¼–è¾‘æŒ‰é’®
                const editBtn = document.createElement('button');
                editBtn.className = 'btn';
                editBtn.textContent = 'ç¼–è¾‘';
                editBtn.addEventListener('click', function() {
                    currentEditGroupId = index;
                    editGroupNameInput.value = group;
                    editGroupModal.style.display = 'block';
                });
                
                // åˆ é™¤æŒ‰é’®
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-danger';
                deleteBtn.textContent = 'åˆ é™¤';
                deleteBtn.addEventListener('click', function() {
                    if (group === 'é»˜è®¤åˆ†ç»„') {
                        alert('é»˜è®¤åˆ†ç»„ä¸èƒ½åˆ é™¤ï¼');
                        return;
                    }
                    
                    if (confirm(`ç¡®å®šè¦åˆ é™¤åˆ†ç»„ "${group}" å—ï¼Ÿè¯¥åˆ†ç»„ä¸‹çš„ ${linkCount} ä¸ªé“¾æ¥å°†è¢«ç§»åŠ¨åˆ°é»˜è®¤åˆ†ç»„ã€‚`)) {
                        // å°†è¯¥åˆ†ç»„ä¸‹çš„æ‰€æœ‰é“¾æ¥ç§»åŠ¨åˆ°é»˜è®¤åˆ†ç»„
                        config.quickLinks.forEach(link => {
                            if (link.group === group) {
                                link.group = 'é»˜è®¤åˆ†ç»„';
                                // é‡ç½®é¡ºåº
                                link.order = config.quickLinks.filter(l => l.group === 'é»˜è®¤åˆ†ç»„').length;
                            }
                        });
                        
                        // åˆ é™¤åˆ†ç»„
                        config.groups.splice(index, 1);
                        
                        saveConfig();
                        updateGroupSelect();
                        renderLinkGroups();
                        renderQuickLinks();
                        renderGroupsList();
                    }
                });
                
                groupActions.appendChild(editBtn);
                groupActions.appendChild(deleteBtn);
                
                groupItem.appendChild(groupInfo);
                groupItem.appendChild(groupActions);
                
                groupsListContainer.appendChild(groupItem);
            });
        }
        
        // æ¸²æŸ“å¿«é€Ÿé“¾æ¥
        function renderQuickLinks() {
            quickLinksContainer.innerHTML = '';
            
            if (config.quickLinks.length === 0) {
                quickLinksContainer.innerHTML = '<p>æš‚æ— å¿«é€Ÿé“¾æ¥ï¼Œè¯·åœ¨è®¾ç½®ä¸­æ·»åŠ </p>';
                return;
            }
            
            // æŒ‰åˆ†ç»„ç»„ç»‡é“¾æ¥
            const groups = {};
            config.quickLinks.forEach(link => {
                if (!groups[link.group]) {
                    groups[link.group] = [];
                }
                groups[link.group].push(link);
            });
            
            // æ¸²æŸ“æ¯ä¸ªåˆ†ç»„çš„é“¾æ¥
            for (const groupName in groups) {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'link-group-display';
                
                // æ·»åŠ åˆ†ç»„æ ‡é¢˜
                const groupTitle = document.createElement('h4');
                groupTitle.textContent = groupName;
                groupDiv.appendChild(groupTitle);
                
                // å¯¹åˆ†ç»„å†…çš„é“¾æ¥æŒ‰é¡ºåºæ’åº
                groups[groupName].sort((a, b) => (a.order || 0) - (b.order || 0));
                
                // æ·»åŠ åˆ†ç»„å†…çš„é“¾æ¥
                groups[groupName].forEach(link => {
                    const linkElement = document.createElement('a');
                    linkElement.href = link.url;
                    linkElement.textContent = link.name;
                    groupDiv.appendChild(linkElement);
                    groupDiv.appendChild(document.createTextNode(' '));
                });
                
                quickLinksContainer.appendChild(groupDiv);
            }
        }
        
        // æ¸²æŸ“é“¾æ¥åˆ†ç»„ç®¡ç†ç•Œé¢
        function renderLinkGroups() {
            linkGroupsContainer.innerHTML = '';
            
            if (config.quickLinks.length === 0) {
                linkGroupsContainer.innerHTML = '<p>æš‚æ— å¿«é€Ÿé“¾æ¥</p>';
                return;
            }
            
            // æŒ‰åˆ†ç»„ç»„ç»‡é“¾æ¥
            const groups = {};
            config.quickLinks.forEach(link => {
                if (!groups[link.group]) {
                    groups[link.group] = [];
                }
                groups[link.group].push(link);
            });
            
            // æ¸²æŸ“æ¯ä¸ªåˆ†ç»„
            for (const groupName in groups) {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'link-group';
                
                // åˆ†ç»„æ ‡é¢˜
                const groupHeader = document.createElement('div');
                groupHeader.className = 'link-group-header';
                
                const groupTitle = document.createElement('div');
                groupTitle.className = 'link-group-title';
                groupTitle.textContent = groupName;
                groupHeader.appendChild(groupTitle);
                
                groupDiv.appendChild(groupHeader);
                
                // å¯¹åˆ†ç»„å†…çš„é“¾æ¥æŒ‰é¡ºåºæ’åº
                groups[groupName].sort((a, b) => (a.order || 0) - (b.order || 0));
                
                // åˆ†ç»„å†…çš„é“¾æ¥
                groups[groupName].forEach((link, index) => {
                    const linkItem = document.createElement('div');
                    linkItem.className = 'link-item';
                    
                    // æ£€æŸ¥å½“å‰é“¾æ¥æ˜¯å¦æ­£åœ¨ç¼–è¾‘
                    const isEditing = currentEditLinkId === link.id;
                    
                    if (isEditing) {
                        // ç¼–è¾‘æ¨¡å¼
                        const editForm = document.createElement('div');
                        editForm.className = 'link-edit-form';
                        
                        const nameRow = document.createElement('div');
                        nameRow.className = 'link-edit-row';
                        
                        const nameLabel = document.createElement('label');
                        nameLabel.textContent = 'åç§°ï¼š';
                        nameLabel.style.minWidth = '50px';
                        
                        const nameInput = document.createElement('input');
                        nameInput.type = 'text';
                        nameInput.className = 'link-edit-input';
                        nameInput.value = link.name;
                        
                        nameRow.appendChild(nameLabel);
                        nameRow.appendChild(nameInput);
                        
                        const urlRow = document.createElement('div');
                        urlRow.className = 'link-edit-row';
                        
                        const urlLabel = document.createElement('label');
                        urlLabel.textContent = 'ç½‘å€ï¼š';
                        urlLabel.style.minWidth = '50px';
                        
                        const urlInput = document.createElement('input');
                        urlInput.type = 'text';
                        urlInput.className = 'link-edit-input';
                        urlInput.value = link.url;
                        
                        urlRow.appendChild(urlLabel);
                        urlRow.appendChild(urlInput);
                        
                        const buttonRow = document.createElement('div');
                        buttonRow.className = 'link-edit-row';
                        buttonRow.style.justifyContent = 'flex-end';
                        
                        const saveBtn = document.createElement('button');
                        saveBtn.className = 'btn btn-success';
                        saveBtn.textContent = 'ä¿å­˜';
                        saveBtn.addEventListener('click', function() {
                            const newName = nameInput.value.trim();
                            let newUrl = urlInput.value.trim();
                            
                            // è‡ªåŠ¨çº é”™ç½‘å€
                            newUrl = autoCorrectUrl(newUrl);
                            
                            if (newName && newUrl) {
                                link.name = newName;
                                link.url = newUrl;
                                saveConfig();
                                currentEditLinkId = null;
                                renderLinkGroups();
                                renderQuickLinks();
                            } else {
                                alert('è¯·å¡«å†™é“¾æ¥åç§°å’Œåœ°å€ï¼');
                            }
                        });
                        
                        const cancelBtn = document.createElement('button');
                        cancelBtn.className = 'btn';
                        cancelBtn.textContent = 'å–æ¶ˆ';
                        cancelBtn.addEventListener('click', function() {
                            currentEditLinkId = null;
                            renderLinkGroups();
                        });
                        
                        buttonRow.appendChild(cancelBtn);
                        buttonRow.appendChild(saveBtn);
                        
                        editForm.appendChild(nameRow);
                        editForm.appendChild(urlRow);
                        editForm.appendChild(buttonRow);
                        
                        linkItem.appendChild(editForm);
                    } else {
                        // æ­£å¸¸æ˜¾ç¤ºæ¨¡å¼
                        const linkInfo = document.createElement('div');
                        linkInfo.innerHTML = `<strong>${link.name}</strong> - ${link.url}`;
                        
                        const linkActions = document.createElement('div');
                        linkActions.style.display = 'flex';
                        linkActions.style.alignItems = 'center';
                        
                        // ç¼–è¾‘æŒ‰é’®
                        const editBtn = document.createElement('button');
                        editBtn.className = 'btn btn-warning';
                        editBtn.textContent = 'ç¼–è¾‘';
                        editBtn.addEventListener('click', function() {
                            currentEditLinkId = link.id;
                            renderLinkGroups();
                        });
                        
                        // é“¾æ¥æ’åºæ§åˆ¶
                        const orderControls = document.createElement('div');
                        orderControls.className = 'link-order-controls';
                        
                        const moveUpBtn = document.createElement('button');
                        moveUpBtn.className = 'btn';
                        moveUpBtn.textContent = 'â†‘';
                        moveUpBtn.title = 'ä¸Šç§»';
                        moveUpBtn.disabled = index === 0;
                        moveUpBtn.addEventListener('click', function() {
                            moveLinkUp(link.id);
                        });
                        
                        const moveDownBtn = document.createElement('button');
                        moveDownBtn.className = 'btn';
                        moveDownBtn.textContent = 'â†“';
                        moveDownBtn.title = 'ä¸‹ç§»';
                        moveDownBtn.disabled = index === groups[groupName].length - 1;
                        moveDownBtn.addEventListener('click', function() {
                            moveLinkDown(link.id);
                        });
                        
                        orderControls.appendChild(moveUpBtn);
                        orderControls.appendChild(moveDownBtn);
                        
                        // ç§»åŠ¨é“¾æ¥åˆ†ç»„åŠŸèƒ½
                        const moveGroupDiv = document.createElement('div');
                        moveGroupDiv.className = 'link-move-group';
                        
                        const groupSelect = document.createElement('select');
                        // æ·»åŠ æ‰€æœ‰åˆ†ç»„é€‰é¡¹
                        config.groups.forEach(group => {
                            const option = document.createElement('option');
                            option.value = group;
                            option.textContent = group;
                            if (group === link.group) {
                                option.selected = true;
                            }
                            groupSelect.appendChild(option);
                        });
                        
                        const moveBtn = document.createElement('button');
                        moveBtn.className = 'btn';
                        moveBtn.textContent = 'ç§»åŠ¨';
                        moveBtn.addEventListener('click', function() {
                            const newGroup = groupSelect.value;
                            if (newGroup !== link.group) {
                                link.group = newGroup;
                                // é‡ç½®é¡ºåº
                                link.order = config.quickLinks.filter(l => l.group === newGroup).length;
                                saveConfig();
                                renderLinkGroups();
                                renderQuickLinks();
                                renderGroupsList();
                            }
                        });
                        
                        moveGroupDiv.appendChild(groupSelect);
                        moveGroupDiv.appendChild(moveBtn);
                        
                        const deleteBtn = document.createElement('button');
                        deleteBtn.className = 'btn btn-danger';
                        deleteBtn.textContent = 'åˆ é™¤';
                        deleteBtn.addEventListener('click', function() {
                            deleteLink(link.id);
                        });
                        
                        linkActions.appendChild(editBtn);
                        linkActions.appendChild(orderControls);
                        linkActions.appendChild(moveGroupDiv);
                        linkActions.appendChild(deleteBtn);
                        
                        linkItem.appendChild(linkInfo);
                        linkItem.appendChild(linkActions);
                    }
                    
                    groupDiv.appendChild(linkItem);
                });
                
                linkGroupsContainer.appendChild(groupDiv);
            }
        }
        
        // ä¸Šç§»é“¾æ¥
        function moveLinkUp(linkId) {
            const link = config.quickLinks.find(l => l.id === linkId);
            if (!link) return;
            
            const groupLinks = config.quickLinks.filter(l => l.group === link.group)
                                                .sort((a, b) => (a.order || 0) - (b.order || 0));
            
            const currentIndex = groupLinks.findIndex(l => l.id === linkId);
            if (currentIndex <= 0) return;
            
            // äº¤æ¢é¡ºåº
            const prevLink = groupLinks[currentIndex - 1];
            const tempOrder = link.order;
            link.order = prevLink.order;
            prevLink.order = tempOrder;
            
            saveConfig();
            renderLinkGroups();
            renderQuickLinks();
        }
        
        // ä¸‹ç§»é“¾æ¥
        function moveLinkDown(linkId) {
            const link = config.quickLinks.find(l => l.id === linkId);
            if (!link) return;
            
            const groupLinks = config.quickLinks.filter(l => l.group === link.group)
                                                .sort((a, b) => (a.order || 0) - (b.order || 0));
            
            const currentIndex = groupLinks.findIndex(l => l.id === linkId);
            if (currentIndex >= groupLinks.length - 1) return;
            
            // äº¤æ¢é¡ºåº
            const nextLink = groupLinks[currentIndex + 1];
            const tempOrder = link.order;
            link.order = nextLink.order;
            nextLink.order = tempOrder;
            
            saveConfig();
            renderLinkGroups();
            renderQuickLinks();
        }
        
        // åˆ é™¤é“¾æ¥
        function deleteLink(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé“¾æ¥å—ï¼Ÿ')) {
                config.quickLinks = config.quickLinks.filter(link => link.id !== id);
                saveConfig();
                renderQuickLinks();
                renderLinkGroups();
                updateGroupSelect();
                renderGroupsList();
            }
        }
        
        // æ›´æ–°æœç´¢è¡¨å•
        function updateSearchForm() {
            // ç°åœ¨è¡¨å•ç”±JavaScriptå¤„ç†ï¼Œæ‰€ä»¥ä¸éœ€è¦æ›´æ–°action
            // ä½†ä»ç„¶éœ€è¦æ›´æ–°æœç´¢å¼•æ“é…ç½®
            const engineRadio = document.querySelector(`input[value="${config.searchEngine}"]`);
            if (engineRadio) {
                engineRadio.checked = true;
            }
        }
        
        // ä¿å­˜é…ç½®åˆ°æœ¬åœ°å­˜å‚¨
        function saveConfig() {
            localStorage.setItem('browserHomeConfig', JSON.stringify(config));
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½é…ç½®
        function loadConfig() {
            const savedConfig = localStorage.getItem('browserHomeConfig');
            if (savedConfig) {
                config = JSON.parse(savedConfig);
                
                // ä¸ºæ—§ç‰ˆæœ¬æ•°æ®æ·»åŠ IDå’Œorderå±æ€§
                let needsUpdate = false;
                config.quickLinks.forEach((link, index) => {
                    if (!link.id) {
                        link.id = Date.now() + Math.random();
                        needsUpdate = true;
                    }
                    if (typeof link.order === 'undefined') {
                        link.order = index;
                        needsUpdate = true;
                    }
                });
                
                // ç¡®ä¿æœ‰é»˜è®¤åˆ†ç»„
                if (!config.groups || config.groups.length === 0) {
                    config.groups = ['é»˜è®¤åˆ†ç»„'];
                    needsUpdate = true;
                }
                
                // ç¡®ä¿æœ‰ä¸»é¢˜è®¾ç½®
                if (!config.theme) {
                    config.theme = 'light';
                    needsUpdate = true;
                }
                
                if (needsUpdate) {
                    saveConfig();
                }
                
                // æ›´æ–°æœç´¢å¼•æ“é€‰æ‹©
                const engineRadio = document.querySelector(`input[value="${config.searchEngine}"]`);
                if (engineRadio) {
                    engineRadio.checked = true;
                }
                updateSearchForm();
                
                // æ›´æ–°ä¸»é¢˜é€‰æ‹©
                const themeRadio = document.querySelector(`input[value="${config.theme}"]`);
                if (themeRadio) {
                    themeRadio.checked = true;
                }
            }
        }
    </script>
</body>
</html>